<!DOCTYPE html>
<html class="light" lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Detalhe da Receita - Neo Brutalism Bento</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap"
        rel="stylesheet" />

    <!-- Core Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/app.js"></script>

    <link href="css/styles.css" rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "nb-yellow": "#FFD23F",
                        "nb-purple": "#C596F8",
                        "nb-pink": "#FF85B3",
                        "nb-blue": "#5EBCF7",
                        "nb-green": "#85E0A3",
                        "nb-orange": "#FF9F45",
                        "nb-red": "#FF5252",
                        "nb-gray": "#9CA3AF",
                        "nb-white": "#FFFFFF",
                        "nb-black": "#000000",
                        "nb-bg": "#F3F0E9",
                        "primary": "#6366F1",
                        "accent-yellow": "#FFDE59",
                        "accent-blue": "#7FBCF5",
                        "accent-green": "#C6E875",
                        "accent-pink": "#FFAFCC",
                        "accent-orange": "#FFAD7A",
                        "background-light": "#F8FAFC",
                        "background-dark": "#101022",
                        "card-dark": "#1E1E2E",
                        "dark-border": "#000000",
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#1E1E1E",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "2xl": "1.25rem",
                        "3xl": "1.5rem",
                        "full": "9999px",
                        "nb": "12px",
                        "brutal": "12px",
                    },
                    boxShadow: {
                        "neo": "4px 4px 0px 0px #000000",
                        "neo-hover": "2px 2px 0px 0px #000000",
                        "neo-sm": "2px 2px 0px 0px #000000",
                        "neo-lg": "8px 8px 0px 0px #000000",
                        "hard": "4px 4px 0px 0px #000000",
                        "hard-sm": "2px 2px 0px 0px #000000",
                        "hard-lg": "6px 6px 0px 0px #000000",
                    },
                    borderWidth: {
                        '3': '3px',
                        '4': '4px',
                    }
                },
            },
        }
    </script>
</head>

<body class="bg-nb-bg font-display text-nb-black overflow-hidden h-screen w-full flex flex-col">
    <div
        class="h-full flex flex-col w-full max-w-full md:max-w-2xl mx-auto bg-nb-bg md:border-x-2 border-nb-black shadow-none md:shadow-hard-lg relative z-10 overflow-hidden">

        <!-- SPA Content Container -->
        <!-- Refactored to Standard App Shell -->
        <header id="app-header"
            class="fixed top-0 w-full max-w-2xl z-50 px-6 pt-8 pb-4 flex items-center justify-between bg-background-light dark:bg-background-dark z-20 transition-all duration-300">
            <!-- Back Button -->
            <button onclick="window.location.href='assistente.html'"
                class="size-12 flex items-center justify-center border-3 border-black bg-white dark:bg-card-dark rounded-xl shadow-neo active:translate-x-[2px] active:translate-y-[2px] active:shadow-neo-hover transition-all text-black dark:text-white hover:bg-gray-50">
                <span class="material-symbols-outlined text-3xl font-bold">arrow_back</span>
            </button>
            <div class="flex gap-3">
                <button onclick="toggleFavorite()" id="favBtn"
                    class="size-12 flex items-center justify-center border-3 border-black bg-white dark:bg-card-dark rounded-xl shadow-neo active:translate-x-[2px] active:translate-y-[2px] active:shadow-neo-hover transition-all text-black dark:text-white hover:brightness-110">
                    <span id="favIcon" class="material-symbols-outlined text-3xl font-bold">favorite</span>
                </button>
                <button
                    class="size-12 flex items-center justify-center border-3 border-black bg-white dark:bg-card-dark rounded-xl shadow-neo active:translate-x-[2px] active:translate-y-[2px] active:shadow-neo-hover transition-all text-black dark:text-white hover:bg-gray-50">
                    <span class="material-symbols-outlined text-3xl font-bold">more_horiz</span>
                </button>
            </div>
        </header>

        <main id="main-content" class="flex-1 overflow-y-auto px-6 pb-32 pt-24 no-scrollbar relative">
                <div class="grid grid-cols-2 gap-4 auto-rows-min">

                    <!-- Hero Section -->
                    <div id="heroCard"
                        class="col-span-2 bg-accent-yellow border-3 border-black rounded-3xl p-6 shadow-neo min-h-[220px] flex flex-col justify-between relative overflow-hidden group">
                        <div
                            class="absolute -right-4 -top-4 size-40 bg-white/30 rounded-full blur-2xl group-hover:bg-white/40 transition-all">
                        </div>
                        <div
                            class="absolute -left-4 -bottom-4 size-24 bg-white/30 rounded-full blur-xl group-hover:bg-white/40 transition-all">
                        </div>
                        <div class="relative z-10 flex justify-between items-start">
                            <span id="recipeCategory"
                                class="bg-black text-white px-3 py-1 rounded-lg text-xs font-black uppercase tracking-widest border-2 border-transparent">Café</span>
                            <div class="bg-white border-3 border-black p-2 rounded-xl">
                                <span id="recipeIcon"
                                    class="material-symbols-outlined text-4xl text-black">bakery_dining</span>
                            </div>
                        </div>
                        <h1 id="recipeTitle"
                            class="relative z-10 text-5xl font-black uppercase leading-[0.9] tracking-tight mt-4 text-black break-words">
                            Torrada<br />Abacate</h1>
                        <div class="relative z-10 flex gap-2 mt-4">
                            <div
                                class="flex items-center gap-1 bg-white/50 backdrop-blur-sm px-2 py-1 rounded-md border-2 border-black/10">
                                <span class="material-symbols-outlined text-sm font-bold">schedule</span>
                                <span id="recipeTime" class="text-xs font-bold uppercase">15 Min</span>
                            </div>
                            <div
                                class="flex items-center gap-1 bg-white/50 backdrop-blur-sm px-2 py-1 rounded-md border-2 border-black/10">
                                <span class="material-symbols-outlined text-sm font-bold">local_fire_department</span>
                                <span id="recipeCalories" class="text-xs font-bold uppercase">320 Kcal</span>
                            </div>
                        </div>
                    </div>

                    <!-- Ingredients -->
                    <div
                        class="col-span-2 bg-white dark:bg-card-dark border-3 border-black rounded-3xl p-6 shadow-neo flex flex-col gap-4">
                        <div class="flex items-center justify-between border-b-3 border-black pb-3 mb-1">
                            <h3 class="text-2xl font-black uppercase tracking-tighter text-black dark:text-white">
                                Ingredientes</h3>
                            <span id="ingredientsCount"
                                class="bg-accent-green text-black border-2 border-black size-8 flex items-center justify-center rounded-full font-bold text-sm">4</span>
                        </div>
                        <ul id="ingredientsList" class="space-y-3">
                            <!-- Populated by JS -->
                        </ul>
                        <button
                            class="w-full mt-2 py-3 bg-black text-white rounded-xl border-3 border-transparent hover:border-black hover:bg-white hover:text-black font-black uppercase tracking-widest transition-all text-sm flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined text-lg">add_shopping_cart</span>
                            Add à Lista
                        </button>
                    </div>

                    <!-- Stats -->
                    <div
                        class="col-span-1 bg-accent-blue border-3 border-black rounded-3xl p-5 shadow-neo flex flex-col justify-between aspect-square">
                        <div class="flex justify-between items-start">
                            <span class="material-symbols-outlined text-3xl text-black">monitoring</span>
                        </div>
                        <div>
                            <div id="recipeProtein" class="text-4xl font-black text-black leading-none mb-1">12g</div>
                            <div class="text-xs font-bold uppercase tracking-widest text-black/80">Proteína</div>
                        </div>
                    </div>
                    <div
                        class="col-span-1 bg-accent-orange border-3 border-black rounded-3xl p-5 shadow-neo flex flex-col justify-between aspect-square">
                        <div class="flex justify-between items-start">
                            <span class="material-symbols-outlined text-3xl text-black">psychology</span>
                        </div>
                        <div>
                            <div id="recipeDifficulty"
                                class="text-3xl font-black text-black leading-none mb-1 uppercase">Fácil</div>
                            <div class="text-xs font-bold uppercase tracking-widest text-black/80">Nível</div>
                        </div>
                    </div>

                    <!-- Steps -->
                    <div class="col-span-2 bg-accent-pink border-3 border-black rounded-3xl p-6 shadow-neo mb-6">
                        <h3
                            class="text-2xl font-black uppercase tracking-tighter text-black mb-6 border-b-3 border-black pb-3">
                            Preparo</h3>
                        <div id="stepsList" class="space-y-6 relative">
                            <div class="absolute left-[19px] top-4 bottom-4 w-1 bg-black/20 -z-10 rounded-full"></div>
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </main>

        <!-- Fixed Bottom Navigation Bar -->
        <div class="fixed bottom-0 left-0 w-full z-50 pointer-events-none flex flex-col items-center">
            <div
                class="w-full max-w-2xl bg-white dark:bg-card-dark border-t-2 border-black pointer-events-auto h-20 px-6 flex items-center justify-between shadow-[0_-4px_0_0_rgba(0,0,0,1)] relative transition-none">
                <!-- Left: Lists -->
                <button onclick="navigate('usuario.html')"
                    class="flex flex-col items-center gap-1 opacity-40 hover:opacity-100 transition-opacity duration-200 w-16">
                    <span
                        class="material-symbols-outlined text-3xl font-bold text-black dark:text-white">list_alt</span>
                    <span
                        class="text-[10px] font-bold uppercase tracking-wide text-black dark:text-white">Listas</span>
                </button>
                <!-- Center: FAB -->
                <div class="absolute left-1/2 -top-8 -translate-x-1/2">
                    <button onclick="navigate('novalista.html')"
                        class="size-16 bg-nb-yellow rounded-full border-2 border-black shadow-neo flex items-center justify-center hover:scale-110 active:scale-95 transition-all group">
                        <span
                            class="material-symbols-outlined text-4xl text-black font-black group-hover:rotate-90 transition-transform">add</span>
                    </button>
                </div>
                <!-- Right: Inventory (Active) -->
                <button onclick="navigate('inventario.html')"
                    class="flex flex-col items-center gap-1 opacity-100 w-16 transition-opacity duration-200">
                    <span
                        class="material-symbols-outlined text-3xl font-bold text-primary dark:text-white">inventory_2</span>
                    <span
                        class="text-[10px] font-bold uppercase tracking-wide text-primary dark:text-white">Estoque</span>
                </button>
            </div>
        </div>
    </div>
</body>

</html>