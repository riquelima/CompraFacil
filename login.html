<!DOCTYPE html>
<html class="light" lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="icon.png" />
    <title>Entrar no Compra Fácil</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="css/styles.css" rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "nb-yellow": "#FFD23F",
                        "nb-purple": "#C596F8",
                        "nb-pink": "#FF85B3",
                        "nb-blue": "#5EBCF7",
                        "nb-green": "#85E0A3",
                        "nb-orange": "#FF9F45",
                        "nb-white": "#FFFFFF",
                        "nb-black": "#000000",
                        "nb-bg": "#F3F0E9",
                        "primary": "#6366F1",
                        "accent-yellow": "#FFDE59",
                        "accent-blue": "#7FBCF5",
                        "accent-green": "#C6E875",
                        "accent-pink": "#FFAFCC",
                        "accent-orange": "#FFAD7A",
                        "background-light": "#F8FAFC",
                        "background-dark": "#101022",
                        "card-dark": "#1E1E2E",
                        "dark-border": "#000000",
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#1E1E1E",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "2xl": "1.25rem",
                        "3xl": "1.5rem",
                        "full": "9999px",
                        "nb": "12px",
                        "brutal": "12px",
                    },
                    boxShadow: {
                        "neo": "4px 4px 0px 0px #000000",
                        "neo-hover": "2px 2px 0px 0px #000000",
                        "neo-sm": "2px 2px 0px 0px #000000",
                        "neo-lg": "8px 8px 0px 0px #000000",
                        "hard": "4px 4px 0px 0px #000000",
                        "hard-sm": "2px 2px 0px 0px #000000",
                        "hard-lg": "6px 6px 0px 0px #000000",
                    },
                    borderWidth: {
                        '3': '3px',
                        '4': '4px',
                    }
                },
            },
        }
    </script>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display text-black dark:text-white transition-colors duration-200 flex items-center justify-center p-4">
    <div id="app-content"
        class="relative w-full max-w-full md:max-w-md mx-auto bg-surface-light dark:bg-surface-dark border-3 border-dark-border dark:border-white rounded-brutal shadow-neo p-6 md:p-8 flex flex-col gap-6">
        <div class="flex flex-col items-center text-center gap-4">
            <div
                class="size-20 bg-accent-yellow dark:bg-yellow-600 border-3 border-dark-border dark:border-white rounded-brutal flex items-center justify-center shadow-neo">
                <span class="material-symbols-outlined text-[40px] text-black dark:text-white">shopping_bag</span>
            </div>
            <div>
                <h1 class="text-3xl font-extrabold text-black dark:text-white leading-tight uppercase tracking-tight">
                    Compra Fácil</h1>
                <p
                    class="text-black dark:text-gray-300 font-bold mt-1 text-sm bg-accent-green dark:bg-green-900/50 inline-block px-2 py-1 border-2 border-dark-border dark:border-white rounded-md shadow-neo-sm transform -rotate-1">
                    Acesse sua lista
                </p>
            </div>
        </div>
        <form id="loginForm" class="flex flex-col gap-5 w-full mt-2">
            <div class="group">
                <label class="block text-sm font-black text-black dark:text-white uppercase mb-1 ml-1"
                    for="email">E-mail</label>
                <div class="relative">
                    <div
                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-black dark:text-white z-10">
                        <span class="material-symbols-outlined text-[24px]">person</span>
                    </div>
                    <input id="email" name="email"
                        class="w-full bg-accent-blue dark:bg-sky-900 border-3 border-dark-border dark:border-white rounded-brutal py-4 pl-12 pr-4 text-lg font-bold text-black dark:text-white placeholder:text-black/50 dark:placeholder:text-white/50 shadow-neo transition-all"
                        placeholder="seu@email.com" type="email" required />
                </div>
            </div>
            <div class="group">
                <label class="block text-sm font-black text-black dark:text-white uppercase mb-1 ml-1"
                    for="password">Senha</label>
                <div class="relative">
                    <div
                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-black dark:text-white z-10">
                        <span class="material-symbols-outlined text-[24px]">key</span>
                    </div>
                    <input id="password" name="password"
                        class="w-full bg-accent-pink dark:bg-pink-900 border-3 border-dark-border dark:border-white rounded-brutal py-4 pl-12 pr-12 text-lg font-bold text-black dark:text-white placeholder:text-black/50 dark:placeholder:text-white/50 shadow-neo transition-all"
                        placeholder="••••••••" type="password" required />
                    <button
                        class="absolute inset-y-0 right-0 pr-4 flex items-center text-black dark:text-white hover:text-gray-700 transition-colors"
                        type="button"
                        onclick="const input = document.getElementById('password'); input.type = input.type === 'password' ? 'text' : 'password'">
                        <span class="material-symbols-outlined text-[24px]">visibility</span>
                    </button>
                </div>
                <!-- Forgot password placeholder -->
            </div>
            <button id="loginBtn" type="submit"
                class="mt-2 w-full bg-black dark:bg-white text-white dark:text-black border-3 border-black dark:border-white font-black text-xl py-4 rounded-brutal shadow-neo hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-neo-sm active:shadow-none active:translate-x-[4px] active:translate-y-[4px] transition-all flex items-center justify-center gap-3 uppercase tracking-wide disabled:opacity-50 disabled:pointer-events-none">
                <span id="btnText">Entrar</span>
                <span id="btnIcon" class="material-symbols-outlined text-[24px] font-bold">arrow_forward</span>
            </button>
        </form>
        <div class="relative flex py-2 items-center">
            <div class="flex-grow border-t-3 border-dark-border dark:border-white"></div>
            <span
                class="flex-shrink-0 mx-4 text-black dark:text-white text-xs font-black uppercase bg-white dark:bg-surface-dark border-2 border-black dark:border-white px-2 py-1 rounded shadow-neo-sm">Ou</span>
            <div class="flex-grow border-t-3 border-dark-border dark:border-white"></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
            <button onclick="alert('Social login not configured for this demo')"
                class="flex items-center justify-center gap-2 bg-white dark:bg-surface-dark h-14 rounded-brutal border-3 border-dark-border dark:border-white shadow-neo hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-neo-sm transition-all group">
                <span class="font-black text-2xl text-black dark:text-white">G</span>
                <span class="font-bold text-black dark:text-white text-sm">Google</span>
            </button>
            <button onclick="alert('Social login not configured for this demo')"
                class="flex items-center justify-center gap-2 bg-white dark:bg-surface-dark h-14 rounded-brutal border-3 border-dark-border dark:border-white shadow-neo hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-neo-sm transition-all group">
                <span class="material-symbols-outlined text-[24px] text-black dark:text-white">smartphone</span>
                <span class="font-bold text-black dark:text-white text-sm">Apple</span>
            </button>
        </div>
        <div class="mt-4 text-center">
            <p class="text-sm font-bold text-black dark:text-white">
                Não tem conta?
                <a href="#" onclick="navigate('cadastro.html'); return false;"
                    class="text-primary dark:text-accent-blue underline decoration-2 decoration-black dark:decoration-white underline-offset-2 ml-1 hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-colors px-1">Crie
                    agora</a>
            </p>
        </div>
    </div>

    <script>
            // Check for existing session
            (async () => {
                const { data: { session } } = await window.supabaseClient.auth.getSession();
                if (session) {
                    navigate('usuario.html');
                }
            })();

        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const btn = document.getElementById('loginBtn');
            const btnText = document.getElementById('btnText');
            const originalText = btnText.innerText;

            // Loading UI
            btn.disabled = true;
            btnText.innerText = 'ENTRANDO...';

            try {
                const formData = new FormData(e.target);
                const email = formData.get('email');
                const password = formData.get('password');

                // Supabase Sign In
                const { data, error } = await window.supabaseClient.auth.signInWithPassword({
                    email: email,
                    password: password,
                });

                if (error) throw error;

                // Success
                navigate('usuario.html');

            } catch (err) {
                console.error('Login error:', err);
                alert('Erro ao entrar: ' + err.message);

                // Reset UI
                btn.disabled = false;
                btnText.innerText = originalText;
            }
        });
    </script>
</body>

</html>